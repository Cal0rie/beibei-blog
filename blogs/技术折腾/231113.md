---
title: 在校园网环境下利用现有路由器，用斐讯N1实现多拨与更多功能
date: 2023/11/13
tags:
 - 斐讯N1
 - Openwrt
 - 路由器
categories:
 - 网络设备
---
# 背景

笔者坐标某一本大学，寝室的网络是拨号上网的形式，运营商为中国移动，宽带是100M的速率，但即使加钱，也拿不到大于100M的宽带，本来想着凑合凑合，毕竟100M打个游戏下个电影其实也算足够。


但有一天一个新朋友给我炫耀了一番他们寝室的网络，结结实实的200M速率，一问才知道他们购置的是一台某LINK的双WAN口的路由器，实现了双线双拨。300+的造价不算太贵，但已经拥有路由器的我们肯定是不愿意为了双拨再购置一台具有类似功能的设备的，考虑到寝室里有两个同学开了宽带套餐，结合已有的路由器，**单线多拨**！

经过这次长见识，我的折腾精神作祟，肯定是没法安稳用着100M的宽带了，如何在现有路由器的基础上增加路由器的功能呢——软路由，探索了B站，恩山，闲鱼等等平台，最终我选择在闲鱼以70+的价格全款拿下了一部斐讯N1盒子，开启了这次的旅程。

本文主要分享使用斐讯N1实现单臂路由和单线多拨的功能，**如果你是双网口软路由，恭喜你省事儿了**，可以跳过关于单臂路由的设置。

# 设备
- PPPOE拨号宽带
- 两个及以上的宽带账号
- 任意品牌的普通路由器
- 斐讯N1或其他软路由
- 网线，电脑什么的不用多说了吧

# 关于斐讯N1
## 购买
3202年，斐讯N1已经是老东西了，虽然市面上有层出不穷的新款软路由，但随着老东西的降价，他依然是实现单臂路由的一个好选择。
![闲鱼购买N1盒子](https://picture.haaland.top:81/images/2023/11/13/IMG_20231113_201517.jpg)
## 刷入OpenWrt
斐讯N1本身其实是一个电视盒子，但刷入Openwrt路由器固件，可以承担路由器的工作，在购买N1的时候，如果商家提供了此类服务，可以要求商家帮忙刷入系统，这个步骤就省下来了。这部分内容网上的教程有很多，本文不再赘述。

这里给出我参考的一个B站视频：
<https://www.bilibili.com/video/BV1UA411M7BU/>

# 接线
在一般情况下，网线是从光猫或墙上的网口接到路由器的WAN口的，但在单臂路由的设置中，我们需要**把路由器WAN口的线移到LAN当中，并把N1接到原路由的另一个LAN口**，最终的状态应当是WAN口为空，N1，原WAN口线和其他设备都连接的是LAN口


# 关于原路由器
如果你的原路由器具有AP模式，直接开启即可，我们的这款是没有的，所以可以参考我的操作，不同路由器的设置界面不同，但基本的功能大同小异，都是可以相互参考的。
## 断开原本的拨号上网
找到路由设置的“上网设置”部分，在WAN的连接类型中，关闭原有的PPPOE拨号
![image.png](https://picture.haaland.top:81/images/2023/11/13/PPPOE.png)
## 关闭DHCP服务器
![image.png](https://picture.haaland.top:81/images/2023/11/13/DHCP.png)
## 设置LAN口
在LAN口设置中，我们需要把LAN的IP设置为手动，并指定一个不与N1的IP地址冲突的新地址，比如我的原路由器设置为192.168.1.3，N1设置为192.168.1.1，子网掩码设置为255.255.255.0

![image.png](https://picture.haaland.top:81/images/2023/11/13/LANf9b62f711e3cfbd0.png)

至此，原路由的设置完成，可以接着折腾N1了。

# 关于N1
## OpenWrt
打开固件提供的网关地址如192.168.1.1，输入固件提供的账号密码进入管理页面
对于OpenWrt的设置，关键点在于WAN口，LAN口和“多线多拨”的设置
### 单臂路由基本设置
#### LAN设置
1. 打开OpenWrt的网络-接口页面，选择LAN口进行“修改”
2. 在“基本设置”选项卡中，将协议设置为“静态地址”，绑定一个IP地址，要求与原路由器保持同一网段，但不与原路由器重复，子网掩码继续设置为255.255.255.0

![基本设置](https://picture.haaland.top:81/images/2023/11/13/6affe65e8f94cf86693c27525d642828.png)

3. 选择物理设置选项卡，去掉“桥接接口”的勾，将接口绑定在eth0上

![lan设置](https://picture.haaland.top:81/images/2023/11/13/lan.png)

#### WAN口设置
1. 打开OpenWrt的网络-接口页面，点击“添加新接口”，新接口的名称设为WAN，协议设为PPPOE，并把接口也绑定在eth0上；

![新建wan](https://picture.haaland.top:81/images/2023/11/13/WAN.png)

2. 完成添加后可以点击“修改”，输入一个宽带账号和密码，并在“防火墙”选项卡确保范围设置在WAN当中；

![image.png](https://picture.haaland.top:81/images/2023/11/13/555ca8e4fd9158d99331727c51d7f105.png)
![image.png](https://picture.haaland.top:81/images/2023/11/13/wan.png)

3. 打开“网络-无线”页面，删除原有的WIFI热点，斐讯N1提供的WIFI性能过于孱弱，保留它可能会导致接口冲突，我们直接删除就行了；

![image.png](https://picture.haaland.top:81/images/2023/11/13/bd8ea67f4fb4e8abc35675ebdc9b2df3.png)

4. 设置完成后进行拨号测试，看看能不能正确获取到IP；

至此，OpenWrt关于单臂路由的设置完成，如果没有出岔子，理论上你已经可以通过原路由的原WIFI进行上网了。

### 单线多拨设置
1. 打开“网络-多线多拨”页面，这是一个OpenWrt插件，但网上主流的固件都会预装这么一个插件，尽管他叫做“多线多拨”，他也是支持单线多拨功能的；
2. 在“开启”选项打上勾，“启用并发多拨”打上勾，主要设置如图，不再赘述，在虚拟WAN数量这里，填上你宽带账号的数量，我这边是2，最低接口在线数量，指的是当在线的接口低于这个数值时，路由器会强制重新拨号；

![image.png](https://picture.haaland.top:81/images/2023/11/13/e6aca10058be95e7a8a54e506d050b8a.png)

3. 设置完“多线多拨”，回到“网络-接口”页面，就会看到WAN口多了几个出来，分别点击“修改”，设置一下不同的宽带账号，检查是否都能完成拨号，获取到IP，如图所示，多拨就成功了；

![image.png](https://picture.haaland.top:81/images/2023/11/13/c228ff00683288a072cafa4bae51051c.png)

# 成果
单线多拨带来的效果在部分场景和测速网站并不能得到体现，这里可以使用这两个网站来进行测速，能够得到相对正确的结果

- SpeedTest：<https://www.speedtest.net/>
- 中科大测速站：<http://test.ustc.edu.cn/>

![image.png](https://picture.haaland.top:81/images/2023/11/13/e503b2b8f9098f39da1cc37145c95930.png)

可以看到，下行带宽已经实现了X2，上行带宽也提高了许多

> 本文不定时修改/更新